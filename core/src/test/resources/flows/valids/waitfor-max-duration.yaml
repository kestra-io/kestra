id: waitfor-max-duration
namespace: io.kestra.tests

tasks:
  - id: waitfor
    type: io.kestra.core.tasks.flows.WaitFor
    condition: "{{ outputs.output_values.values.count != '-5'}}"
    checkFrequency:
      maxDuration: PT5S
    failOnMaxReached: true
    task:
      id: output_values
      type: io.kestra.plugin.core.output.OutputValues
      values:
        count: "{{ outputs.waitfor.iterationCount + 1 }}"