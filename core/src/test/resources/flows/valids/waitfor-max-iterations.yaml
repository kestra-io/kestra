id: waitfor-max-iterations
namespace: io.kestra.tests

tasks:
  - id: waitfor
    type: io.kestra.core.tasks.flows.WaitFor
    condition: "{{ previous.values.count == '10'}}"
    maxIterations: 3
    failOnMaxReached: true
    task:
      id: output_values
      type: io.kestra.core.tasks.outputs.OutputValues
      values:
        count: "{{ (previous.values.count | default('0')) | number + 1 }}"