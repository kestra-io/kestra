@use 'sass:map';
@use 'sass:math';
@use 'element-plus/theme-chalk/src/mixins/var' as *;

@import "@kestra-io/ui-libs/src/scss/variables.scss";

// use bootstrap for main style
:root {
    --el-bg-color: var(--backgrounds-background-body);
    --el-bg-color-page: var(--backgrounds-background-body);
    --el-bg-color-overlay: var(--bs-white);

    --el-text-color-primary: var(--content-content-link);
    --el-text-color-regular: var(--content-content-primary);
    --el-text-color-secondary: var(--content-content-secondary);
    --el-text-color-placeholder: var(--content-content-secondary);
    --el-text-color-disabled: var(--content-content-inactive);

    --el-border-color: var(--border-border);
    --el-border-color-light: var(--border-border);
    --el-border-color-lighter: var(--border-border);
    --el-border-color-extra-light: var(--border-border);
    --el-border-color-dark: var(--border-border-secondary);
    --el-border-color-darker: var(--border-border-secondary);

    --el-fill-color: var(--bs-gray-300); // used in buttons .is-text
    --el-fill-color-light: var(--bs-gray-200); // used in many places autocomplete suggestion highlighted
    --el-fill-color-lighter: var(--bs-gray-100); // used to be for table stripped but not anymore
    --el-fill-color-extra-light: var(--bs-white); // not used at all
    --el-fill-color-dark: var(--bs-gray-400); // used in buttons .is-text when active
    --el-fill-color-darker: var(--bs-gray-500); // not used at kestra
    --el-fill-color-blank: var(--bs-white); // used in many places --el-input-background-color

    // alert colors
    --el-color-alert-info: var(--tooltip-content-information);
    --el-color-alert-error: var(--executions-failed-content-failed);
    @each $type in ("warning", "success", "danger") {
        #{--el-color-alert-#{$type}}: var(--executions-#{$type}-content-#{$type});
    }

    --bs-code-color: #7400DF;

    #{--card-bg}: var(--backgrounds-background-card);
    #{--input-bg}: $input-bg;

    #{--bs-border-color}: #E5E4F7;
    #{--bs-border-secondary-color}: #E5E4F7;

    #{--bs-card-bg}: #FFFFFF;
    #{--bs-body-color}: black;
    #{--bs-heading-color}: var(--bs-black);
    #{--bs-secondary}: #564A75;
    #{--bs-secondary-rgb}: to-rgb(#564A75);
    #{--bs-tertiary-color}: #7E719F;
    #{--bs-tertiary}: $tertiary;
    #{--bs-link-color-rgb}: to-rgb(#8405FF);
    #{--bs-link-hover-color-rgb}: to-rgb(#9470FF);

    #{--bs-gray}: #{map.get($grays, "600")};
    @each $key, $value in $grays {
        --bs-gray-#{$key}: #{$value};

        @each $i in (2, 3, 5, 7, 10, 15) {
            #{--bs-gray-#{$key}-lighten-#{$i}}: #{lighten($value, $i)};
            #{--bs-gray-#{$key}-darken-#{$i}}: #{darken($value, $i)};
        }
    }

    @each $key, $value in $colors {
        @each $i in (45) {
            #{--bs-#{$key}-darken-#{$i}}: #{darken($value, $i)};
        }
    }

    $content-information: #134ecc;
    $content-running: #7400df;
    $content-alert: #ab0009;
    $content-warning: #c15300;
    $content-success: #03DABA;
    #{--bs-info-rgb}: to_rgb($content-information);
    #{--bs-running-rgb}: to_rgb($content-running);
    #{--bs-danger-rgb}: to_rgb($content-alert);
    #{--bs-warning-rgb}: to_rgb($content-warning);
    #{--bs-success-rgb}: to_rgb($content-success);

    #{--bs-border-info}: var(--border-information);
    #{--bs-border-running}: var(--border-running);
    #{--bs-border-danger}: var(--border-failed);
    #{--bs-border-warning}: var(--border-warning);
    #{--bs-border-success}: var(--border-success);
}

$logLevels: "trace", "debug", "info", "warn", "error";
@each $logLevel in $logLevels {
    .log-border-#{$logLevel} {
        border-color: var(--log-#{$logLevel}-border-#{$logLevel}) !important;
    }
    .log-bg-#{$logLevel} {
        background-color: var(--log-#{$logLevel}-background-#{$logLevel}) !important;
    }
    .log-content-#{$logLevel} {
        color: var(--log-#{$logLevel}-content-#{$logLevel}) !important;
    }
}

.opacity-40 {
    opacity: 40%;
}

.min-w-auto {
    min-width: auto !important;
}

.text-tertiary {
    color: var(--bs-tertiary-color);
}

.button-top {
    background: var(--card-bg);
    border-bottom: 1px solid var(--bs-border-color);
    padding: calc(var(--spacer) / 2) calc(var(--spacer) * 2);
    padding-left: calc(var(--spacer) / 2);
    display: flex;
    align-items: center;
    justify-content: end;
    max-height: 49.5px;

    :deep(.validation) {
        border: 0;
        padding-left: calc(var(--spacer) / 2);
        padding-right: calc(var(--spacer) / 2);
    }

    :deep(.el-button) {
        border: 0;
        padding-left: calc(var(--spacer) / 2);
        padding-right: calc(var(--spacer) / 2);
    }
}